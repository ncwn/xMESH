; PlatformIO Project Configuration File
;
; xMESH Hop-Count Routing Protocol (Baseline 2)
; 
; This firmware uses LoRaMesher's built-in hop-count routing.
; Unlike flooding, LoRaMesher automatically:
; - Maintains routing tables
; - Sends HELLO packets to discover neighbors
; - Selects shortest path based on hop count
; - Forwards packets only to next hop (not broadcast)
;
; Build Environments:
;   - sensor: Data source node (sends periodic packets)
;   - router: Forwarding node (relays packets using routing table)
;   - gateway: Data sink node (collects packets)
;
; Build command examples:
;   pio run -e sensor
;   pio run -e router
;   pio run -e gateway
;   pio run -e sensor -t upload
;
; https://docs.platformio.org/page/projectconf.html

[platformio]
default_envs = sensor

[env]
; Common settings for all environments
platform = espressif32
board = heltec_wifi_lora_32_V3
framework = arduino
monitor_speed = 115200

lib_deps = 
	https://github.com/LoRaMesher/LoRaMesher.git
	adafruit/Adafruit SSD1306@^2.5.1
	adafruit/Adafruit GFX Library@^1.10.13
	adafruit/Adafruit BusIO@^1.11.1

build_type = release

; Uncomment for verbose debug output
; build_flags = -D CORE_DEBUG_LEVEL=5

[env:sensor]
; Sensor node: Generates and transmits data packets
build_flags = 
	-D XMESH_ROLE_SENSOR
	-D NODE_ROLE=0

[env:router]
; Router node: Forwards packets using hop-count routing
build_flags = 
	-D XMESH_ROLE_ROUTER
	-D NODE_ROLE=1

[env:gateway]
; Gateway node: Receives packets and logs to serial/Raspberry Pi
build_flags = 
	-D XMESH_ROLE_GATEWAY
	-D NODE_ROLE=2
